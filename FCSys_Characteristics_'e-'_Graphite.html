<html>
<head>
<title>FCSys.Characteristics.'e-'.Graphite</title>
<meta name="keywords" content="fuel cell library, FCSys, fuel cell, PEM, proton exchange membrane, polymer exchange membrance, PEMFC, Modelica, Dymola, electrochemistry">
<meta name="date" content="2013-1-12">
<meta name="description" content="e- in graphite">
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="stylesheets/ModelicaDoc.css">
<link rel="shortcut icon" href="../resources/documentation/favicon.ico">
<script type="text/javascript" src="javascripts/analytics.js"></script>
</head>
<body>
<div class="sidebar">
  <div class="sidebarwrapper">
  <a href="index.html"><p class="sidebar-title">FCSys</p></a>
  <p class="logo"><a href="index.html">
    <img src="images/icon.gif" class="logo" alt="Logo" width=150>
  </a></p>

  <h3>Table of Contents</h3>
    <ul>
    <li><a href="FCSys_UsersGuide.html">User's Guide</a></li>
    <li><a href="FCSys_BCs.html">BCs</a></li>
    <li><a href="FCSys_Sensors.html">Sensors</a></li>
    <li><a href="FCSys_Assemblies.html">Assemblies</a>**</li>
    <li><a href="FCSys_Regions.html">Regions</a>**</li>
    <li><a href="FCSys_Subregions.html">Subregions</a></li>
    <li><a href="FCSys_Connectors.html">Connectors</a></li>
    <li><a href="FCSys_Characteristics.html">Characteristics</a></li>
    <li><a href="FCSys_Units.html">Units</a></li>
    <li><a href="FCSys_Quantities.html">Quantities</a></li>
    <li><a href="FCSys_BaseClasses.html">BaseClasses</a></li>
    <li>**Please check back soon or contact kdavies4 at gmail.com.</li>
    </ul>

  <h3>Download</h3>
    <ul>
      <li>Latest: <a href="release/FCSys-2.0.zip" rel="nofollow">FCSys-2.0.zip</a> (**Check back soon.)</li>
    </ul>
  </div>
</div>

<div class="document">
  <div class="documentwrapper">
    <div class="bodywrapper">
      <div class="body">

<h2><a name="FCSys.Characteristics.'e-'.Graphite"></a><a href="FCSys_Characteristics_'e-'.html#FCSys.Characteristics.'e-'">FCSys.Characteristics.'e-'</a>.Graphite</h2>
<b>e- in graphite</b>
<p>
<p><h3>Information</h3></p>

     <p>Assumptions:
     <ol>
     <li>The pressure-volume relationship is based on the Drude and Summerfeld theories of metals
     [<a href="FCSys_UsersGuide.html#FCSys.UsersGuide.References">Ashcroft1976</a>, pp. 4&ndash;39].</li>
     </ol>
     </p>
     <p>For more information, see the
     <a href="FCSys_Characteristics_BaseClasses_Characteristic.html#FCSys.Characteristics.BaseClasses.Characteristic">Characteristic</a> record.</p><p>
Extends from <a href="FCSys_Characteristics_'e-'_Gas.html#FCSys.Characteristics.'e-'.Gas">Gas</a> (e- gas).
<p><h3>Package Content</h3><p>
<table border=1 cellspacing=0 cellpadding=2 >
<tr><th>Name</th><th>Description</th></tr>
<tr><td><img src="images/FCSys.Characteristics.'e-'.Graphite.PolynomialS.png" alt="FCSys.Characteristics.'e-'.Graphite.Polynomial" width=20  height=20 align=top>&nbsp;<a href="FCSys_Characteristics_'e-'_Graphite_Polynomial.html#FCSys.Characteristics.'e-'.Graphite.Polynomial">Polynomial</a>
</td><td>Polynomial functions</td></tr>
<tr><td><img src="images/FCSys.Characteristics.'e-'.Graphite.dpS.png" alt="FCSys.Characteristics.'e-'.Graphite.dp" width=20  height=20 align=top>&nbsp;<a href="FCSys_Characteristics_'e-'_Graphite.html#FCSys.Characteristics.'e-'.Graphite.dp">dp</a>
</td><td>Derivative of pressure as defined by <a href="FCSys_Characteristics_'e-'_Graphite.html#FCSys.Characteristics.'e-'.Graphite.p_Tv">p_Tv</a>()</td></tr>
<tr><td><img src="images/FCSys.Characteristics.'e-'.Graphite.dpS.png" alt="FCSys.Characteristics.'e-'.Graphite.h" width=20  height=20 align=top>&nbsp;<a href="FCSys_Characteristics_'e-'_Graphite.html#FCSys.Characteristics.'e-'.Graphite.h">h</a>
</td><td>Specific enthalpy as a function of temperature and pressure</td></tr>
<tr><td><img src="images/FCSys.Characteristics.'e-'.Graphite.dpS.png" alt="FCSys.Characteristics.'e-'.Graphite.p_Tv" width=20  height=20 align=top>&nbsp;<a href="FCSys_Characteristics_'e-'_Graphite.html#FCSys.Characteristics.'e-'.Graphite.p_Tv">p_Tv</a>
</td><td>Pressure as a function of temperature and specific volume</td></tr>
<tr><td><img src="images/FCSys.Characteristics.'e-'.Graphite.dpS.png" alt="FCSys.Characteristics.'e-'.Graphite.s" width=20  height=20 align=top>&nbsp;<a href="FCSys_Characteristics_'e-'_Graphite.html#FCSys.Characteristics.'e-'.Graphite.s">s</a>
</td><td>Specific entropy as a function of temperature and pressure</td></tr>
<tr><td><img src="images/FCSys.Characteristics.'e-'.Graphite.dpS.png" alt="FCSys.Characteristics.'e-'.Graphite.v_Tp" width=20  height=20 align=top>&nbsp;<a href="FCSys_Characteristics_'e-'_Graphite.html#FCSys.Characteristics.'e-'.Graphite.v_Tp">v_Tp</a>
</td><td>Specific volume as a function of temperature and pressure</td></tr>
<tr><TH COLSPAN="2">Inherited</th></tr>
<tr><td>formula</td><td>Chemical formula</td></tr>
<tr><td>phase</td><td>Material phase</td></tr>
<tr><td>m</td><td>Specific mass</td></tr>
<tr><td>r</td><td>Specific radius</td></tr>
<tr><td>z=Chemistry.charge(formula)</td><td>Charge number</td></tr>
<tr><td>p0=U.bar</td><td>Reference pressure (<i>p</i>&deg;)</td></tr>
<tr><td>p_min=-Modelica.Constants.inf</td><td>Minimum pressure for numerical protection (<i>p</i><sub>min</sub>)</td></tr>
<tr><td>b_v=[1]</td><td>Coefficients of specific volume as a polynomial in <i>p</i>/<i>T</i> and <i>T</i> (<i>b</i><sub><i>v</i></sub>)</td></tr>
<tr><td>specVolPow={-1,0}</td><td>Powers of <i>p</i>/<i>T</i> and <i>T</i> for 1<sup>st</sup> row and column of <i>b</i><sub><i>v</i></sub>, respectively</td></tr>
<tr><td>Deltah0_f</td><td>Enthalpy of formation at 298.15 K, <i>p</i>&deg; (&Delta;<i>h</i>&deg;<sub>f</sub>)</td></tr>
<tr><td>Deltah0</td><td><i>h</i>&deg;(298.15 K) - <i>h</i>&deg;(0 K) (&Delta;<i>h</i>&deg;)</td></tr>
<tr><td>h_offset=0</td><td>Additional enthalpy offset (<i>h</i><sub>offset</sub>)</td></tr>
<tr><td>specHeatCapPow=-2</td><td>Power of <i>T</i> for 1<sup>st</sup> column of <i>b</i><sub><i>c</i></sub></td></tr>
<tr><td>T_lim_c={0,Modelica.Constants.inf}</td><td>Temperature limits for the rows of <i>b</i><sub><i>c</i></sub> and <i>B</i><sub><i>c</i></sub> (<i>T</i><sub>lim <i>c</i></sub>)</td></tr>
<tr><td>b_c</td><td>Coefficients of isobaric specific heat capacity at <i>p</i>&deg; as a polynomial in <i>T</i> (<i>b</i><sub><i>c</i></sub>)</td></tr>
<tr><td>B_c</td><td>Integration constants for specific enthalpy and entropy (<i>B</i><sub><i>c</i></sub>)</td></tr>
<tr><td>isCompressible=anyTrue({anyTrue({b_v[i, j] &lt;&gt; 0 and specVolPow[1] + i - 1 &lt;&gt; 0 for i in 1:size(b_v, 1)}) for j in 1:size(b_v, 2)})</td><td>true, if specific volume depends on pressure</td></tr>
<tr><td>hasThermalExpansion=anyTrue({anyTrue({b_v[i, j] &lt;&gt; 0 and specVolPow[2] + j - specVolPow[1] - i &lt;&gt; 0 for i in 1:size(b_v, 1)}) for j in 1:size(b_v, 2)})</td><td>true, if specific volume depends on temperature</td></tr>
<tr><td>pressPow=if specVolPow[1] == 0 then {0,0} else {1/specVolPow[1] - size(b_v, 1) + 1,1 - (if mod(abs(specVolPow[2]/specVolPow[1]), 1) &lt; Modelica.Constants.small then round(specVolPow[2]/specVolPow[1]) else specVolPow[2]/specVolPow[1])}</td><td>Powers of v and T for 1st row and column of b_p, respectively</td></tr>
<tr><td>b_p=if size(b_v, 1) == 1 then b_v .^ (-pressPow[1]) else {(if specVolPow[1] + i == 0 or specVolPow[1] + i == 1 or size(b_v, 1) == 1 then b_v[i, :] else (if specVolPow[1] + i == 2 and specVolPow[1] &lt;= 0 then b_v[i, :] + b_v[i - 1, :] .^ 2 else (if specVolPow[1] + i == 3 and specVolPow[1] &lt;= 0 then b_v[i, :] + b_v[i - 2, :] .* (b_v[i - 2, :] .^ 2 + 3*b_v[i - 1, :]) else zeros(size(b_v, 2))))) for i in size(b_v, 1):-1:1}</td><td>Coefficients of p as a polynomial in v and T</td></tr>
<tr><td><img src="images/FCSys.Characteristics.'e-'.Graphite.dpS.png" alt="FCSys.Characteristics.BaseClasses.Characteristic.alpha" width=20  height=20 align=top>&nbsp;<a href="FCSys_Characteristics_BaseClasses_Characteristic.html#FCSys.Characteristics.BaseClasses.Characteristic.alpha">alpha</a>
</td><td>Ideal base resistivity factor as a function of temperature (&alpha;)</td></tr>
<tr><td><img src="images/FCSys.Characteristics.'e-'.Graphite.dpS.png" alt="FCSys.Characteristics.BaseClasses.Characteristic.c_V" width=20  height=20 align=top>&nbsp;<a href="FCSys_Characteristics_BaseClasses_Characteristic.html#FCSys.Characteristics.BaseClasses.Characteristic.c_V">c_V</a>
</td><td>Isochoric specific heat capacity as a function of temperature and specific volume (<i>c</i><sub><i>V</i></sub>)</td></tr>
<tr><td><img src="images/FCSys.Characteristics.'e-'.Graphite.dpS.png" alt="FCSys.Characteristics.BaseClasses.Characteristic.dv" width=20  height=20 align=top>&nbsp;<a href="FCSys_Characteristics_BaseClasses_Characteristic.html#FCSys.Characteristics.BaseClasses.Characteristic.dv">dv</a>
</td><td>Derivative of specific volume as defined by <a href="FCSys_Characteristics_BaseClasses_Characteristic.html#FCSys.Characteristics.BaseClasses.Characteristic.v_Tp">v_Tp</a>()</td></tr>
<tr><td><img src="images/FCSys.Characteristics.'e-'.Graphite.dpS.png" alt="FCSys.Characteristics.BaseClasses.Characteristic.F" width=20  height=20 align=top>&nbsp;<a href="FCSys_Characteristics_BaseClasses_Characteristic.html#FCSys.Characteristics.BaseClasses.Characteristic.F">F</a>
</td><td>Fluidity as a function of temperature and specific volume</td></tr>
<tr><td><img src="images/FCSys.Characteristics.'e-'.Graphite.dpS.png" alt="FCSys.Characteristics.BaseClasses.Characteristic.g" width=20  height=20 align=top>&nbsp;<a href="FCSys_Characteristics_BaseClasses_Characteristic.html#FCSys.Characteristics.BaseClasses.Characteristic.g">g</a>
</td><td>Gibbs potential as a function of temperature and pressure</td></tr>
<tr><td><img src="images/FCSys.Characteristics.'e-'.Graphite.dpS.png" alt="FCSys.Characteristics.BaseClasses.Characteristic.R" width=20  height=20 align=top>&nbsp;<a href="FCSys_Characteristics_BaseClasses_Characteristic.html#FCSys.Characteristics.BaseClasses.Characteristic.R">R</a>
</td><td>Thermal resistivity as a function of temperature and specific volume (<i>r</i><sub>th</sub>)</td></tr>
<tr><td><img src="images/FCSys.Characteristics.'e-'.Graphite.dpS.png" alt="FCSys.Characteristics.BaseClasses.Characteristic.Xi" width=20  height=20 align=top>&nbsp;<a href="FCSys_Characteristics_BaseClasses_Characteristic.html#FCSys.Characteristics.BaseClasses.Characteristic.Xi">Xi</a>
</td><td>Fusivity as a function of temperature and specific volume</td></tr>
</table>
<hr>

<h2><img src="images/FCSys.Characteristics.'e-'.Graphite.dpI.png" alt="FCSys.Characteristics.'e-'.Graphite.dp" align=RIGHT border=1 width=80  height=80 >
<a name="FCSys.Characteristics.'e-'.Graphite.dp"></a><a href="FCSys_Characteristics_'e-'_Graphite.html#FCSys.Characteristics.'e-'.Graphite">FCSys.Characteristics.'e-'.Graphite</a>.dp</h2>
<b>Derivative of pressure as defined by <a href="FCSys_Characteristics_'e-'_Graphite.html#FCSys.Characteristics.'e-'.Graphite.p_Tv">p_Tv</a>()</b><p>
<p><h3>Information</h3></p>
Extends from <a href="http://build.openmodelica.org/Documentation/Modelica.Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a> (Icon for functions).
<p><h3>Inputs</h3><p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">TemperatureAbsolute</a></td><td>T</td><td>298.15*U.K</td><td>Temperature</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.VolumeSpecificAbsolute">VolumeSpecificAbsolute</a></td><td>v</td><td>298.15*U.K/U.atm</td><td>Specific volume [l3/N]</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.Temperature">Temperature</a></td><td>dT</td><td>0</td><td>Derivative of temperature</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.VolumeSpecific">VolumeSpecific</a></td><td>dv</td><td>0</td><td>Derivative of specific volume [l3/N]</td></tr>
</table>
<p><h3>Outputs</h3><p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.Pressure">Pressure</a></td><td>dp</td><td>Derivative of pressure [m/(l.T2)]</td></tr>
</table>
<p><h3>Modelica definition</h3>
<pre>
<font color="blue">redeclare </font><font color="blue">function</font> dp <font color="darkgreen">
  &quot;Derivative of pressure as defined by <a href="FCSys_Characteristics_'e-'_Graphite.html#FCSys.Characteristics.'e-'.Graphite.p_Tv">p_Tv</a>()&quot;</font>

  <font color="blue">extends </font><a href="http://build.openmodelica.org/Documentation/Modelica.Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a>;

  <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T=298.15*U.K <font color="darkgreen">&quot;Temperature&quot;</font>;
  <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.VolumeSpecificAbsolute">Q.VolumeSpecificAbsolute</a> v=298.15*U.K/U.atm <font color="darkgreen">&quot;Specific volume&quot;</font>;
  <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.Temperature">Q.Temperature</a> dT=0 <font color="darkgreen">&quot;Derivative of temperature&quot;</font>;
  <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.VolumeSpecific">Q.VolumeSpecific</a> dv=0 <font color="darkgreen">&quot;Derivative of specific volume&quot;</font>;
  <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.Pressure">Q.Pressure</a> dp <font color="darkgreen">&quot;Derivative of pressure&quot;</font>;

<font color="blue">algorithm </font>
  dp := <font color="blue">if </font>isCompressible<font color="blue"> then </font><font color="red">Polynomial.f</font>(
    v,
    {(pressPow[1] + i - 1)*<font color="red">Polynomial.f</font>(
      T,
      b_p[i, :],
      pressPow[2]) <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(b_p, 1)},
    pressPow[1] - 1)*dv + <font color="red">Polynomial.f</font>(
    T,
    {(pressPow[2] + i - 1)*<font color="red">Polynomial.f</font>(
      v,
      b_p[:, i],
      pressPow[1]) <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(b_p, 2)},
    pressPow[2] - 1)*dT<font color="blue"> else </font>0;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>dp;
</pre>
<hr>

<h2><img src="images/FCSys.Characteristics.'e-'.Graphite.dpI.png" alt="FCSys.Characteristics.'e-'.Graphite.h" align=RIGHT border=1 width=80  height=80 >
<a name="FCSys.Characteristics.'e-'.Graphite.h"></a><a href="FCSys_Characteristics_'e-'_Graphite.html#FCSys.Characteristics.'e-'.Graphite">FCSys.Characteristics.'e-'.Graphite</a>.h</h2>
<b>Specific enthalpy as a function of temperature and pressure</b><p>
<p><h3>Information</h3></p>

  <p>For an ideal gas, this function is independent of pressure
  (although pressure remains as a valid input).</p>
    <p>
Extends from <a href="http://build.openmodelica.org/Documentation/Modelica.Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a> (Icon for functions).
<p><h3>Inputs</h3><p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">TemperatureAbsolute</a></td><td>T</td><td>298.15*U.K</td><td>Temperature</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.PressureAbsolute">PressureAbsolute</a></td><td>p</td><td>1*U.atm</td><td>Pressure [m/(l.T2)]</td></tr>
<tr><td><a href="FCSys_Characteristics_BaseClasses.html#FCSys.Characteristics.BaseClasses.ReferenceEnthalpy">ReferenceEnthalpy</a></td><td>referenceEnthalpy</td><td>ReferenceEnthalpy.EnthalpyOf...</td><td>Choice of enthalpy reference</td></tr>
</table>
<p><h3>Outputs</h3><p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.Potential">Potential</a></td><td>h</td><td>Specific enthalpy [l2.m/(N.T2)]</td></tr>
</table>
<p><h3>Modelica definition</h3>
<pre>
<font color="blue">redeclare </font><font color="blue">function</font> h <font color="darkgreen">
  &quot;Specific enthalpy as a function of temperature and pressure&quot;</font>

  <font color="blue">extends </font><a href="http://build.openmodelica.org/Documentation/Modelica.Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a>;

  <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T=298.15*U.K <font color="darkgreen">&quot;Temperature&quot;</font>;
  <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.PressureAbsolute">Q.PressureAbsolute</a> p=1*U.atm <font color="darkgreen">&quot;Pressure&quot;</font>;
  <font color="blue">input </font><a href="FCSys_Characteristics_BaseClasses.html#FCSys.Characteristics.BaseClasses.ReferenceEnthalpy">ReferenceEnthalpy</a> referenceEnthalpy=ReferenceEnthalpy.EnthalpyOfFormationAt25degC
    <font color="darkgreen">&quot;Choice of enthalpy reference&quot;</font>;
  <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.Potential">Q.Potential</a> h <font color="darkgreen">&quot;Specific enthalpy&quot;</font>;

<font color="blue">protected </font>
  <textblock type="model" expanded="false" path="FCSys.Characteristics.'e-'.Graphite.h.h0_i"><font color="blue">function</font> h0_i <font color="darkgreen">
    &quot;Return h0 as a function of T using one of the temperature intervals&quot;</font>
    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T <font color="darkgreen">&quot;Temperature&quot;</font>;
    <font color="blue">input </font>Integer i <font color="darkgreen">&quot;Index of the temperature interval&quot;</font>;
    <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.Potential">Q.Potential</a> h0 <font color="darkgreen">
      &quot;Specific enthalpy at given temperature relative to enthalpy of formation at 25 degC, both at reference pressure&quot;</font>;

  <font color="blue">algorithm </font>
    h0 := <font color="red">Polynomial.F</font>(
        T,
        b_c[i, :],
        specHeatCapPow) + B_c[i, 1];
    <font color="darkgreen">// This is the integral of c0_p*dT up to T at p0.  The lower bound is the</font>
    <font color="darkgreen">// enthalpy of formation (of ideal gas, if the material is gaseous) at</font>
    <font color="darkgreen">// 25 degC [McBride2002, p. 2].</font>
  <font color="blue">end </font>h0_i</textblock>;

  <textblock type="model" expanded="false" path="FCSys.Characteristics.'e-'.Graphite.h.h_resid"><font color="blue">function</font> h_resid <font color="darkgreen">
    &quot;Residual specific enthalpy for pressure adjustment&quot;</font>
    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T <font color="darkgreen">&quot;Temperature&quot;</font>;
    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.PressureAbsolute">Q.PressureAbsolute</a> p <font color="darkgreen">&quot;Pressure&quot;</font>;
    <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.Potential">Q.Potential</a> h_resid <font color="darkgreen">
      &quot;Integral of (delh/delp)_T*dp up to p with zero integration constant&quot;</font>;

  <font color="blue">algorithm </font>
    h_resid := <font color="red">Polynomial.F</font>(
        p/T,
        {(specVolPow[1] + i)*<font color="red">Polynomial.f</font>(
          T,
          b_v[i, :],
          specVolPow[2] - 1) - <font color="red">Polynomial.df</font>(
          T,
          b_v[i, :],
          specVolPow[2],
          1,
          <font color="red">zeros</font>(<font color="red">size</font>(b_v, 2))) <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(b_v, 1)},
        specVolPow[1]);
    <font color="darkgreen">// Note that the partial derivative (delh/delp)_T is equal to</font>
    <font color="darkgreen">// v + T*(dels/delp)_T by definition of enthalpy change (dh = T*ds + v*dp)</font>
    <font color="darkgreen">// and v - T*(delv/delT)_p by applying the appropriate Maxwell relation</font>
    <font color="darkgreen">// ((dels/delp)_T = -(delv/delT)_p).</font>
  <font color="blue">end </font>h_resid</textblock>;

<font color="blue">algorithm </font>
  <font color="darkgreen">/*
    assert(T_lim_c[1] &lt;= T and T &lt;= T_lim_c[size(T_lim_c, 1)], &quot;Temperature &quot; +
    String(T/U.K) + &quot; K is out of bounds for &quot; + name + &quot; ([&quot; + String(T_lim_c[1]
    /U.K) + &quot;, &quot; + String(T_lim_c[size(T_lim_c, 1)]/U.K) + &quot;] K).&quot;);
  */</font>
  <font color="darkgreen">// Note:  This is commented out so that the function can be inlined.</font>
  <font color="darkgreen">// Note:  In Dymola 7.4 T_lim_c[size(T_lim_c, 1)] must be used</font>
  <font color="darkgreen">// instead of T_lim_c[end] due to:</font>
  <font color="darkgreen">//    &quot;Error, not all &#39;end&#39; could be expanded.&quot;</font>

  h := <font color="red">smooth</font>(1, <font color="red">sum</font>((<font color="blue">if </font>(T_lim_c[i] &lt;= T<font color="blue"> or </font>i == 1)<font color="blue"> and </font>(T &lt; T_lim_c[i + 1]<font color="blue">
     or </font>i == <font color="red">size</font>(T_lim_c, 1) - 1)<font color="blue"> then </font><font color="red">h0_i</font>(T, i)<font color="blue"> else </font>0) <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(
    T_lim_c, 1) - 1)) + (<font color="blue">if </font>referenceEnthalpy == ReferenceEnthalpy.ZeroAt0K<font color="blue">
     then </font>Deltah0<font color="blue"> else </font>0) - (<font color="blue">if </font>referenceEnthalpy == ReferenceEnthalpy.ZeroAt25degC<font color="blue">
     then </font>Deltah0_f<font color="blue"> else </font>0) + h_offset + <font color="red">h_resid</font>(T, p) - <font color="red">h_resid</font>(T, <font color="blue">if </font>phase == &quot;gas&quot;<font color="blue">
     then </font>0<font color="blue"> else </font>p0);

  <font color="darkgreen">// The last two terms adjust for the actual pressure relative to the</font>
  <font color="darkgreen">// reference.  If the material is gaseous, then the reference is the ideal</font>
  <font color="darkgreen">// gas.  In that case, the lower limit of the integral (delh/delp)_T*dp is</font>
  <font color="darkgreen">// p=0, where a real gas behaves as an ideal gas.  Otherwise, the lower limit</font>
  <font color="darkgreen">// is simply the reference pressure (p0).  See [Rao 1997, p. 271].</font>

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>h;
</pre>
<hr>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE p_Tv<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<h2><img src="images/FCSys.Characteristics.'e-'.Graphite.dpI.png" alt="FCSys.Characteristics.'e-'.Graphite.p_Tv" align=RIGHT border=1 width=80  height=80 >
<a name="FCSys.Characteristics.'e-'.Graphite.p_Tv"></a><a href="FCSys_Characteristics_'e-'_Graphite.html#FCSys.Characteristics.'e-'.Graphite">FCSys.Characteristics.'e-'.Graphite</a>.p_Tv</h2>
<b>Pressure as a function of temperature and specific volume</b><p>
<p><h3>Information</h3></p>
<p>If the species is incompressible, then <i>p</i>(<i>T</i>, <i>v</i>) is undefined,
  and the function will return a value of zero.</p>
  <p>The derivative of this function is <a href="FCSys_Characteristics_BaseClasses_Characteristic.html#FCSys.Characteristics.BaseClasses.Characteristic.dp">dp</a>().</p><p>
Extends from <a href="http://build.openmodelica.org/Documentation/Modelica.Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a> (Icon for functions).
<p><h3>Inputs</h3><p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">TemperatureAbsolute</a></td><td>T</td><td>298.15*U.K</td><td>Temperature</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.VolumeSpecificAbsolute">VolumeSpecificAbsolute</a></td><td>v</td><td>298.15*U.K/U.atm</td><td>Specific volume [l3/N]</td></tr>
</table>
<p><h3>Outputs</h3><p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.PressureAbsolute">PressureAbsolute</a></td><td>p</td><td>Pressure [m/(l.T2)]</td></tr>
</table>
<p><h3>Modelica definition</h3>
<pre>
<font color="blue">redeclare </font><font color="blue">function</font> p_Tv <font color="darkgreen">
  &quot;Pressure as a function of temperature and specific volume&quot;</font>
  annotation(derivative=<a href="FCSys_Characteristics_'e-'_Graphite.html#FCSys.Characteristics.'e-'.Graphite.dp">dp</a>);
  <font color="blue">extends </font><a href="http://build.openmodelica.org/Documentation/Modelica.Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a>;

  <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T=298.15*U.K <font color="darkgreen">&quot;Temperature&quot;</font>;
  <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.VolumeSpecificAbsolute">Q.VolumeSpecificAbsolute</a> v=298.15*U.K/U.atm <font color="darkgreen">&quot;Specific volume&quot;</font>;
  <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.PressureAbsolute">Q.PressureAbsolute</a> p <font color="darkgreen">&quot;Pressure&quot;</font>;

<font color="blue">algorithm </font>
  <font color="darkgreen">// assert(isCompressible,</font>
  <font color="darkgreen">//  &quot;The pressure is undefined since the material is incompressible.&quot;,</font>
  <font color="darkgreen">//  AssertionLevel.warning);</font>
  <font color="darkgreen">// Note:  In Dymola 7.4 the assertion level can&#39;t be set, although it has</font>
  <font color="darkgreen">// been defined as an argument to assert() since Modelica 3.0.</font>

  p := <font color="blue">if </font>isCompressible<font color="blue"> then </font><font color="red">Polynomial.f</font>(
    v,
    {<font color="red">Polynomial.f</font>(
      T,
      b_p[i, :],
      pressPow[2]) <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(b_p, 1)},
    pressPow[1])<font color="blue"> else </font>0;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>p_Tv;
</pre>
<hr>

<h2><img src="images/FCSys.Characteristics.'e-'.Graphite.dpI.png" alt="FCSys.Characteristics.'e-'.Graphite.s" align=RIGHT border=1 width=80  height=80 >
<a name="FCSys.Characteristics.'e-'.Graphite.s"></a><a href="FCSys_Characteristics_'e-'_Graphite.html#FCSys.Characteristics.'e-'.Graphite">FCSys.Characteristics.'e-'.Graphite</a>.s</h2>
<b>Specific entropy as a function of temperature and pressure</b><p>
<p><h3>Information</h3></p>
Extends from <a href="http://build.openmodelica.org/Documentation/Modelica.Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a> (Icon for functions).
<p><h3>Inputs</h3><p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">TemperatureAbsolute</a></td><td>T</td><td>298.15*U.K</td><td>Temperature</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.PressureAbsolute">PressureAbsolute</a></td><td>p</td><td>1*U.atm</td><td>Pressure [m/(l.T2)]</td></tr>
</table>
<p><h3>Outputs</h3><p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">NumberAbsolute</a></td><td>s</td><td>Specific entropy [1]</td></tr>
</table>
<p><h3>Modelica definition</h3>
<pre>
<font color="blue">redeclare </font><font color="blue">function</font> s <font color="darkgreen">
  &quot;Specific entropy as a function of temperature and pressure&quot;</font>
  <font color="blue">extends </font><a href="http://build.openmodelica.org/Documentation/Modelica.Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a>;

  <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T=298.15*U.K <font color="darkgreen">&quot;Temperature&quot;</font>;
  <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.PressureAbsolute">Q.PressureAbsolute</a> p=1*U.atm <font color="darkgreen">&quot;Pressure&quot;</font>;
  <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">Q.NumberAbsolute</a> s <font color="darkgreen">&quot;Specific entropy&quot;</font>;

<font color="blue">protected </font>
  <textblock type="model" expanded="false" path="FCSys.Characteristics.'e-'.Graphite.s.s0_i"><font color="blue">function</font> s0_i <font color="darkgreen">
    &quot;Return s0 as a function of T using one of the temperature intervals&quot;</font>
    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T <font color="darkgreen">&quot;Temperature&quot;</font>;
    <font color="blue">input </font>Integer i <font color="darkgreen">&quot;Index of the temperature interval&quot;</font>;
    <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">Q.NumberAbsolute</a> s0 <font color="darkgreen">
      &quot;Specific entropy at given temperature and reference pressure&quot;</font>;

  <font color="blue">algorithm </font>
    s0 := <font color="red">Polynomial.F</font>(
        T,
        b_c[i, :],
        specHeatCapPow - 1) + B_c[i, 2];
    <font color="darkgreen">// This is the integral of c0_p/T*dT up to T at p0 with the</font>
    <font color="darkgreen">// absolute entropy at the lower bound [McBride2002, p. 2].</font>
  <font color="blue">end </font>s0_i</textblock>;

  <textblock type="model" expanded="false" path="FCSys.Characteristics.'e-'.Graphite.s.s_resid"><font color="blue">function</font> s_resid <font color="darkgreen">
    &quot;Residual specific entropy for pressure adjustment&quot;</font>
    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T <font color="darkgreen">&quot;Temperature&quot;</font>;
    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.PressureAbsolute">Q.PressureAbsolute</a> p <font color="darkgreen">&quot;Pressure&quot;</font>;
    <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">Q.NumberAbsolute</a> s_resid <font color="darkgreen">
      &quot;Integral of (dels/delp)_T*dp up to p with zero integration constant, excluding the ideal gas term&quot;</font>;

  <font color="blue">algorithm </font>
    s_resid := <font color="red">Polynomial.F</font>(
        p/T,
        {<font color="blue">if </font>i == -specVolPow[1]<font color="blue"> then </font>0<font color="blue"> else </font><font color="red">coeff</font>(T, i) <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(b_v, 1)},
        0);
    <font color="darkgreen">// Note:  According to the Maxwell relations the partial derivative</font>
    <font color="darkgreen">// (dels/delp)_T is equal to -(delv/delT)_p.</font>
  <font color="blue">end </font>s_resid</textblock>;

  <textblock type="model" expanded="false" path="FCSys.Characteristics.'e-'.Graphite.s.coeff"><font color="blue">function</font> coeff <font color="darkgreen">
    &quot;Return the coefficient for a term in the integral of (dels/delp)_T*dp&quot;</font>
    <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T <font color="darkgreen">&quot;Temperature&quot;</font>;
    <font color="blue">input </font>Integer i <font color="darkgreen">&quot;Row index to b_v&quot;</font>;
    <font color="blue">output </font>Real coeff <font color="darkgreen">&quot;Coefficient&quot;</font>;

  <font color="blue">algorithm </font>
    coeff := (specVolPow[1] + i - 1)*<font color="red">Polynomial.f</font>(
        T,
        b_v[i, :],
        specVolPow[2] - 1) - <font color="red">Polynomial.df</font>(
        T,
        b_v[i, :],
        specVolPow[2],
        1,
        <font color="red">zeros</font>(<font color="red">size</font>(b_v, 2)));
  <font color="blue">end </font>coeff</textblock>;

<font color="blue">algorithm </font>
  <font color="darkgreen">/*
  assert(T_lim_c[1] &lt;= T and T &lt;= T_lim_c[size(T_lim_c, 1)], &quot;Temperature &quot; +
    String(T/U.K) + &quot; K is out of bounds for &quot; + name + &quot; ([&quot; + String(T_lim_c[1]
    /U.K) + &quot;, &quot; + String(T_lim_c[size(T_lim_c, 1)]/U.K) + &quot;] K).&quot;);
  */</font>
  <font color="darkgreen">// Note:  This is commented out so that the function can be inlined.</font>
  <font color="darkgreen">// Note:  In Dymola 7.4 T_lim_c[size(T_lim_c, 1)] must be used</font>
  <font color="darkgreen">// instead of T_lim_c[end] due to:</font>
  <font color="darkgreen">//    &quot;Error, not all &#39;end&#39; could be expanded.&quot;;</font>

  s := <font color="red">smooth</font>(1, <font color="red">sum</font>((<font color="blue">if </font>(T_lim_c[i] &lt;= T<font color="blue"> or </font>i == 1)<font color="blue"> and </font>(T &lt; T_lim_c[i + 1]<font color="blue">
     or </font>i == <font color="red">size</font>(T_lim_c, 1) - 1)<font color="blue"> then </font><font color="red">s0_i</font>(T, i)<font color="blue"> else </font>0) <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(
    T_lim_c, 1) - 1)) + <font color="red">sum</font>(<font color="blue">if </font>i == -specVolPow[1]<font color="blue"> then </font><font color="red">coeff</font>(T, i)*<font color="red">ln</font>(p/p0)<font color="blue">
     else </font>0 <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(b_v, 1)) + <font color="red">s_resid</font>(T, p) - <font color="red">s_resid</font>(T, <font color="blue">if </font>phase == &quot;gas&quot;<font color="blue">
     then </font>0<font color="blue"> else </font>p0);
  <font color="darkgreen">// The first term gives the specific entropy at the given temperature and</font>
  <font color="darkgreen">// reference pressure (p0).  The following terms adjust for the actual</font>
  <font color="darkgreen">// pressure (p) by integrating (dels/delp)_T*dp.  In general, the</font>
  <font color="darkgreen">// integration is from p0 to p.  However, for gases the reference state</font>
  <font color="darkgreen">// is the ideal gas at the reference pressure.  Therefore, the lower</font>
  <font color="darkgreen">// integration limit for the real gas terms (non-ideal; besides the</font>
  <font color="darkgreen">// first virial term) is p=0---the pressure limit at which a real gas</font>
  <font color="darkgreen">// behaves as an ideal gas.  See [Rao1997, p. 272].</font>
<font color="blue">end </font>s;
</pre>
<hr>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE v_Tp<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<h2><img src="images/FCSys.Characteristics.'e-'.Graphite.dpI.png" alt="FCSys.Characteristics.'e-'.Graphite.v_Tp" align=RIGHT border=1 width=80  height=80 >
<a name="FCSys.Characteristics.'e-'.Graphite.v_Tp"></a><a href="FCSys_Characteristics_'e-'_Graphite.html#FCSys.Characteristics.'e-'.Graphite">FCSys.Characteristics.'e-'.Graphite</a>.v_Tp</h2>
<b>Specific volume as a function of temperature and pressure</b><p>
<p><h3>Information</h3></p>

  <p>The derivative of this function is
  <a href="FCSys_Characteristics_BaseClasses_Characteristic.html#FCSys.Characteristics.BaseClasses.Characteristic.dv">dv</a>().</p><p>
Extends from <a href="http://build.openmodelica.org/Documentation/Modelica.Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a> (Icon for functions).
<p><h3>Inputs</h3><p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">TemperatureAbsolute</a></td><td>T</td><td>298.15*U.K</td><td>Temperature</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.PressureAbsolute">PressureAbsolute</a></td><td>p</td><td>1*U.atm</td><td>Pressure [m/(l.T2)]</td></tr>
</table>
<p><h3>Outputs</h3><p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.VolumeSpecificAbsolute">VolumeSpecificAbsolute</a></td><td>v</td><td>Specific volume [l3/N]</td></tr>
</table>
<p><h3>Modelica definition</h3>
<pre>
<font color="blue">redeclare </font><font color="blue">function</font> v_Tp <font color="darkgreen">
  &quot;Specific volume as a function of temperature and pressure&quot;</font>
  annotation(derivative=<a href="FCSys_Characteristics_BaseClasses_Characteristic.html#FCSys.Characteristics.BaseClasses.Characteristic.dv">dv</a>);
  <font color="blue">extends </font><a href="http://build.openmodelica.org/Documentation/Modelica.Icons.html#Modelica.Icons.Function">Modelica.Icons.Function</a>;

  <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.TemperatureAbsolute">Q.TemperatureAbsolute</a> T=298.15*U.K <font color="darkgreen">&quot;Temperature&quot;</font>;
  <font color="blue">input </font><a href="FCSys_Quantities.html#FCSys.Quantities.PressureAbsolute">Q.PressureAbsolute</a> p=1*U.atm <font color="darkgreen">&quot;Pressure&quot;</font>;
  <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.VolumeSpecificAbsolute">Q.VolumeSpecificAbsolute</a> v <font color="darkgreen">&quot;Specific volume&quot;</font>;

<font color="blue">algorithm </font>
  v := <font color="red">Polynomial.f</font>(
    p/T,
    {<font color="red">Polynomial.f</font>(
      T,
      b_v[i, :],
      specVolPow[2]) <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(b_v, 1)},
    specVolPow[1]);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>v_Tp;
</pre>
      </div>
    </div>
  </div>
</div>
<div class="footer">
  &copy; Copyright 2012, Kevin Davies, Georgia Tech Research Corporation. Last updated Sat Jan 12 10:40:53 2013.
</div>
</body>
</html>
