<HTML>
<HEAD>
<TITLE>FCSys.Regions</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;3D arrays of discrete, interconnected subregions&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal} 
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Regions<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="FCSys.Regions"></A><A HREF="FCSys.html#FCSys"
>FCSys</A>.Regions</H2>
<B>3D arrays of discrete, interconnected subregions</B>
<P>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
<b>Licensed by the Georgia Tech Research Corporation under the Modelica License 2</b><br>
Copyright 2007&ndash;2013, Georgia Tech Research Corporation.
</p>
<p>
<i>This Modelica package is <u>free</u> software and the use is completely at <u>your own risk</u>;
it can be redistributed and/or modified under the terms of the Modelica License 2. For license conditions (including the
disclaimer of warranty) see <A HREF="FCSys_UsersGuide.html#FCSys.UsersGuide.ModelicaLicense2"
>
FCSys.UsersGuide.ModelicaLicense2</a> or visit <a href="http://www.modelica.org/licenses/ModelicaLicense2">
http://www.modelica.org/licenses/ModelicaLicense2</a>.</i>
</p>
<pre></PRE><P>
Extends from <A HREF="file:////opt/dymola/Modelica/Library/Modelica 3.2/help/Modelica_Icons_Package.html#Modelica.Icons.Package"
>Modelica.Icons.Package</A> (Icon for standard packages).
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="FCSys.Regions.ExamplesS.png" ALT="FCSys.Regions.Examples" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_Regions_Examples.html#FCSys.Regions.Examples"
>Examples</A>
</TD><TD>Examples</TD></TR>
<TR><TD><IMG SRC="FCSys.Regions.AnFPsS.png" ALT="FCSys.Regions.AnFPs" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_Regions_AnFPs.html#FCSys.Regions.AnFPs"
>AnFPs</A>
</TD><TD>Anode flow plates</TD></TR>
<TR><TD><IMG SRC="FCSys.Regions.AnFPsS.png" ALT="FCSys.Regions.AnGDLs" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_Regions_AnGDLs.html#FCSys.Regions.AnGDLs"
>AnGDLs</A>
</TD><TD>Anode gas diffusion layers</TD></TR>
<TR><TD><IMG SRC="FCSys.Regions.AnFPsS.png" ALT="FCSys.Regions.AnCLs" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_Regions_AnCLs.html#FCSys.Regions.AnCLs"
>AnCLs</A>
</TD><TD>Anode catalyst layers</TD></TR>
<TR><TD><IMG SRC="FCSys.Regions.AnFPsS.png" ALT="FCSys.Regions.PEMs" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_Regions_PEMs.html#FCSys.Regions.PEMs"
>PEMs</A>
</TD><TD>Proton exchange membranes</TD></TR>
<TR><TD><IMG SRC="FCSys.Regions.AnFPsS.png" ALT="FCSys.Regions.CaCLs" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_Regions_CaCLs.html#FCSys.Regions.CaCLs"
>CaCLs</A>
</TD><TD>Cathode catalyst layers</TD></TR>
<TR><TD><IMG SRC="FCSys.Regions.AnFPsS.png" ALT="FCSys.Regions.CaGDLs" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_Regions_CaGDLs.html#FCSys.Regions.CaGDLs"
>CaGDLs</A>
</TD><TD>Cathode gas diffusion layers</TD></TR>
<TR><TD><IMG SRC="FCSys.Regions.AnFPsS.png" ALT="FCSys.Regions.CaFPs" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_Regions_CaFPs.html#FCSys.Regions.CaFPs"
>CaFPs</A>
</TD><TD>Cathode flow plates</TD></TR>
<TR><TD><IMG SRC="FCSys.Regions.RegionS.png" ALT="FCSys.Regions.Region" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="FCSys_Regions.html#FCSys.Regions.Region"
>Region</A>
</TD><TD>Base model for a 3D array of subregions</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Region<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="FCSys.Regions.RegionI.png" ALT="FCSys.Regions.Region" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="FCSys.Regions.Region"></A><A HREF="FCSys_Regions.html#FCSys.Regions"
>FCSys.Regions</A>.Region</H2>
<B>Base model for a 3D array of subregions</B><p>
<IMG SRC="FCSys.Regions.RegionD.png" ALT="FCSys.Regions.Region">
<P><H3>Information</H3></P>
<PRE></pre><p>The following notes apply to the parameters:
  <ul>
  <li>If <code>L_x = zeros(0)</code> (or <code>ones(0)</code> or <code>fill(1, 0)</code>), then there are no
   subregions along the x axis and the boundaries along the x axis are
   directly connected.  The same applies to the other axes.</li>
  </ul>
  </p>
<pre></PRE><P>

<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="FCSys_Subregions.html#FCSys.Subregions.Subregion"
>Subregion</A></TD><TD>subregions[n_x, n_y, n_z]</TD><TD>redeclare FCSys.Subregions.S...</TD><TD>Base subregion model and its modifications for each subregion</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Geometry</TD></TR>
<TR><TD><A HREF="FCSys_Quantities.html#FCSys.Quantities.Length"
>Length</A></TD><TD>L_x[:]</TD><TD>fill(1*U.m/1, 1)</TD><TD>Lengths along the x axis (<i>L</i><sub>x</sub>) [l]</TD></TR>
<TR><TD><A HREF="FCSys_Quantities.html#FCSys.Quantities.Length"
>Length</A></TD><TD>L_y[:]</TD><TD>fill(1*U.m/1, 1)</TD><TD>Lengths along the y axis (<i>L</i><sub>y</sub>) [l]</TD></TR>
<TR><TD><A HREF="FCSys_Quantities.html#FCSys.Quantities.Length"
>Length</A></TD><TD>L_z[:]</TD><TD>fill(1*U.m/1, 1)</TD><TD>Lengths along the z axis (<i>L</i><sub>z</sub>) [l]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Axes with faces included</TD></TR>
<TR><TD>Boolean</TD><TD>inclFacesX</TD><TD>true</TD><TD>X</TD></TR>
<TR><TD>Boolean</TD><TD>inclFacesY</TD><TD>true</TD><TD>Y</TD></TR>
<TR><TD>Boolean</TD><TD>inclFacesZ</TD><TD>true</TD><TD>Z</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="FCSys_Connectors.html#FCSys.Connectors.FaceBus"
>FaceBus</A></TD><TD>xNegative[n_y, n_z]</TD><TD>Negative face along the x axis</TD></TR>
<TR><TD><A HREF="FCSys_Connectors.html#FCSys.Connectors.FaceBus"
>FaceBus</A></TD><TD>xPositive[n_y, n_z]</TD><TD>Positive face along the x axis</TD></TR>
<TR><TD><A HREF="FCSys_Connectors.html#FCSys.Connectors.FaceBus"
>FaceBus</A></TD><TD>yNegative[n_x, n_z]</TD><TD>Negative face along the y axis</TD></TR>
<TR><TD><A HREF="FCSys_Connectors.html#FCSys.Connectors.FaceBus"
>FaceBus</A></TD><TD>yPositive[n_x, n_z]</TD><TD>Positive face along the y axis</TD></TR>
<TR><TD><A HREF="FCSys_Connectors.html#FCSys.Connectors.FaceBus"
>FaceBus</A></TD><TD>zNegative[n_x, n_y]</TD><TD>Negative face along the z axis</TD></TR>
<TR><TD><A HREF="FCSys_Connectors.html#FCSys.Connectors.FaceBus"
>FaceBus</A></TD><TD>zPositive[n_x, n_y]</TD><TD>Positive face along the z axis</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">partial </font><font color="blue">model</font> Region <font color="darkgreen">&quot;Base model for a 3D array of subregions&quot;</font>
  <font color="darkgreen">// extends FCSys.BaseClasses.Icons.Names.Top3;</font>
  <font color="darkgreen">// extends FCSys.BaseClasses.Icons.Names.Top6;</font>

  <font color="darkgreen">// Geometric parameters</font>
  <font color="blue">parameter </font><A HREF="FCSys_Quantities.html#FCSys.Quantities.Length"
>Q.Length</A> L_x[:](<font color="blue">each </font><font color="blue">final </font>min=Modelica.Constants.small) = <font color="red">fill</font>(1*U.m
    /1, 1) <font color="darkgreen">&quot;</pre>Lengths along the x axis (<i>L</i><sub>x</sub>)<pre>&quot;</font>;
  <font color="blue">parameter </font><A HREF="FCSys_Quantities.html#FCSys.Quantities.Length"
>Q.Length</A> L_y[:](<font color="blue">each </font><font color="blue">final </font>min=Modelica.Constants.small) = <font color="red">fill</font>(1*U.m
    /1, 1) <font color="darkgreen">&quot;</pre>Lengths along the y axis (<i>L</i><sub>y</sub>)<pre>&quot;</font>;
  <font color="blue">parameter </font><A HREF="FCSys_Quantities.html#FCSys.Quantities.Length"
>Q.Length</A> L_z[:](<font color="blue">each </font><font color="blue">final </font>min=Modelica.Constants.small) = <font color="red">fill</font>(1*U.m
    /1, 1) <font color="darkgreen">&quot;</pre>Lengths along the z axis (<i>L</i><sub>z</sub>)<pre>&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font>Integer n_x=<font color="red">size</font>(L_x, 1) <font color="darkgreen">
    &quot;Number of sets of subregions along the x axis&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font>Integer n_y=<font color="red">size</font>(L_y, 1) <font color="darkgreen">
    &quot;Number of sets of subregions along the y axis&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font>Integer n_z=<font color="red">size</font>(L_z, 1) <font color="darkgreen">
    &quot;Number of sets of subregions along the z axis&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="FCSys_Quantities.html#FCSys.Quantities.Length"
>Q.Length</A> L[Axis]={<font color="red">sum</font>(L_x),<font color="red">sum</font>(L_y),<font color="red">sum</font>(L_z)} <font color="blue">if </font>
    hasSubregions <font color="darkgreen">&quot;Length&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="FCSys_Quantities.html#FCSys.Quantities.Area"
>Q.Area</A> A[Axis]={L[<font color="red">cartWrap</font>(ax + 1)]*L[<font color="red">cartWrap</font>(ax + 2)] <font color="blue">for </font>
      ax<font color="blue"> in </font>1:3} <font color="blue">if </font>hasSubregions <font color="darkgreen">&quot;Cross-sectional area&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="FCSys_Quantities.html#FCSys.Quantities.Volume"
>Q.Volume</A> V=<font color="red">product</font>(L) <font color="blue">if </font>hasSubregions <font color="darkgreen">&quot;Volume&quot;</font>;

  <font color="darkgreen">// Assumptions about included faces</font>
  <font color="blue">parameter </font>Boolean inclFacesX=true <font color="darkgreen">&quot;X&quot;</font>;

  <font color="blue">parameter </font>Boolean inclFacesY=true <font color="darkgreen">&quot;Y&quot;</font>;

  <font color="blue">parameter </font>Boolean inclFacesZ=true <font color="darkgreen">&quot;Z&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="FCSys_Connectors.html#FCSys.Connectors.FaceBus"
>Connectors.FaceBus</A> xNegative[n_y, n_z] <font color="blue">if </font>inclFacesX <font color="darkgreen">
    &quot;Negative face along the x axis&quot;</font>;
  <A HREF="FCSys_Connectors.html#FCSys.Connectors.FaceBus"
>Connectors.FaceBus</A> xPositive[n_y, n_z] <font color="blue">if </font>inclFacesX <font color="darkgreen">
    &quot;Positive face along the x axis&quot;</font>;
  <A HREF="FCSys_Connectors.html#FCSys.Connectors.FaceBus"
>Connectors.FaceBus</A> yNegative[n_x, n_z] <font color="blue">if </font>inclFacesY <font color="darkgreen">
    &quot;Negative face along the y axis&quot;</font>;
  <A HREF="FCSys_Connectors.html#FCSys.Connectors.FaceBus"
>Connectors.FaceBus</A> yPositive[n_x, n_z] <font color="blue">if </font>inclFacesY <font color="darkgreen">
    &quot;Positive face along the y axis&quot;</font>;
  <A HREF="FCSys_Connectors.html#FCSys.Connectors.FaceBus"
>Connectors.FaceBus</A> zNegative[n_x, n_y] <font color="blue">if </font>inclFacesZ <font color="darkgreen">
    &quot;Negative face along the z axis&quot;</font>;
  <A HREF="FCSys_Connectors.html#FCSys.Connectors.FaceBus"
>Connectors.FaceBus</A> zPositive[n_x, n_y] <font color="blue">if </font>inclFacesZ <font color="darkgreen">
    &quot;Positive face along the z axis&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <font color="blue">replaceable </font><A HREF="FCSys_Subregions.html#FCSys.Subregions.Subregion"
>FCSys.Subregions.Subregion</A> subregions[n_x, n_y, n_z] <font color="blue">if </font>
    hasSubregions <font color="blue">constrainedby </font>FCSys.Subregions.BaseClasses.PartialSubregion(
    <font color="blue">final </font>L={{L_x[i_x],L_y[i_y],L_z[i_z]} <font color="blue">for </font>i_z<font color="blue"> in </font>1:n_z, i_y<font color="blue"> in </font>1:n_y, i_x<font color="blue">
         in </font>1:n_x},
    <font color="blue">each </font><font color="blue">final </font>inclFacesX=inclFacesX,
    <font color="blue">each </font><font color="blue">final </font>inclFacesY=inclFacesY,
    <font color="blue">each </font><font color="blue">final </font>inclFacesZ=inclFacesZ) <font color="darkgreen">
    &quot;Base subregion model and its modifications for each subregion&quot;</font>;</textblock>

<font color="blue">protected </font>
  <font color="blue">final </font><font color="blue">parameter </font>Boolean hasSubregions=n_x &gt; 0<font color="blue"> and </font>n_y &gt; 0<font color="blue"> and </font>n_z &gt; 0 <font color="darkgreen">
    &quot;true, if there are any subregions&quot;</font>;

<font color="blue">equation </font>
  <font color="darkgreen">// X axis</font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(xNegative, subregions[1, :, :].xNegative);</textblock>
  <font color="blue">for </font>i<font color="blue"> in </font>1:n_x - 1<font color="blue"> loop</font>
    <font color="red">connect</font>(subregions[i, :, :].xPositive, subregions[i + 1, :, :].xNegative) <font color="darkgreen">
      &quot;Connection b/w neighboring subregions (not shown the diagram)&quot;</font>;
  <font color="blue">end for</font>;
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(subregions[n_x, :, :].xPositive, xPositive);</textblock>
  <font color="blue">if </font>n_x == 0<font color="blue"> then</font>
    <font color="red">connect</font>(xNegative, xPositive) <font color="darkgreen">&quot;Direct pass-through (not shown the diagram)&quot;</font>;
  <font color="blue">end if</font>;

  <font color="darkgreen">// Y axis</font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(yNegative, subregions[:, 1, :].yNegative);</textblock>
  <font color="blue">for </font>i<font color="blue"> in </font>1:n_y - 1<font color="blue"> loop</font>
    <font color="red">connect</font>(subregions[:, i, :].yPositive, subregions[:, i + 1, :].yNegative) <font color="darkgreen">
      &quot;Connection b/w neighboring subregions (not shown the diagram)&quot;</font>;
  <font color="blue">end for</font>;
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(subregions[:, n_y, :].yPositive, yPositive);</textblock>

  <font color="blue">if </font>n_y == 0<font color="blue"> then</font>
    <font color="red">connect</font>(yNegative, yPositive) <font color="darkgreen">&quot;Direct pass-through (not shown the diagram)&quot;</font>;
  <font color="blue">end if</font>;

  <font color="darkgreen">// Z axis</font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(zNegative, subregions[:, :, 1].zNegative);</textblock>
  <font color="blue">for </font>i<font color="blue"> in </font>1:n_z - 1<font color="blue"> loop</font>
    <font color="red">connect</font>(subregions[:, :, i].zPositive, subregions[:, :, i + 1].zNegative) <font color="darkgreen">
      &quot;Connection b/w neighboring subregions (not shown the diagram)&quot;</font>;
  <font color="blue">end for</font>;
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(zPositive, subregions[:, :, n_z].zPositive);</textblock>
  <font color="blue">if </font>n_z == 0<font color="blue"> then</font>
    <font color="red">connect</font>(zNegative, zPositive) <font color="darkgreen">&quot;Direct pass-through (not shown the diagram)&quot;</font>;
  <font color="blue">end if</font>;
  <font color="darkgreen">// TODO:  Once primitivesVisible is supported by Modelica tools, complete</font>
  <font color="darkgreen">// the icon for this model and use primitivesVisible=false in the icons of</font>
  <font color="darkgreen">// the fuel cell layer models.</font>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Region;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.Dymola.com/">Dymola</a> Fri Mar 22 00:03:53 2013.
</address></BODY>
</HTML>
